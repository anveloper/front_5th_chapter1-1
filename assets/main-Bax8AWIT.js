import{s,R as e,E as u,P as m,L as E,M as d,a as l,C as f}from"./profile-page-3oCPz6ew.js";const c="/front_5th_chapter1-1",O={[e.MAIN]:d,[e.LOGIN]:E,[e.PROFILE]:m,[e.ERROR]:u},n=(a,t=!1)=>{history[t?"replaceState":"pushState"](null,null,c+a,a),i()},i=()=>{const a=document.querySelector("#root");let{pathname:t}=location;t.includes(c)&&(t=t.replace(c,""));const r=s.isLogon();if(t===e.PROFILE&&!r)return n(e.LOGIN,!0);if(t===e.LOGIN&&r)return n(e.MAIN,!0);const o=O[t]||u;a.innerHTML=o(),I()},I=()=>{const a=document.querySelector("#root");a.addEventListener("submit",t=>{if(t.preventDefault(),t.target.id===l.LOGIN_FORM){const o=new FormData(t.target).get("username")||"";s.login(o),n(e.MAIN)}else if(t.target.id===l.PROFILE_FORM){const r=new FormData(t.target),o=r.get("username")||"",g=r.get("email")||"",L=r.get("bio")||"";s.setUser({username:o,email:g,bio:L})}}),a.addEventListener("click",t=>{if(t.target.tagName==="A"){if(t.preventDefault(),t.target.pathname===e.LOGOUT){s.logout(),n(e.LOGIN);return}n(t.target.pathname)}}),a.addEventListener(f.PAGE_PUSH,t=>{t.detail.url&&n(t.detail.url)})};window.addEventListener("popstate",i);i();i();
