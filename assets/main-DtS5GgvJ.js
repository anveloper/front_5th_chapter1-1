import{s,R as e,E as u,P as d,L as E,M as m,a as l,C as f}from"./profile-page-3oCPz6ew.js";const i="/front_5th_chapter1-1",O={[e.MAIN]:m,[e.LOGIN]:E,[e.PROFILE]:d,[e.ERROR]:u},r=(a,t=!1)=>{history[t?"replaceState":"pushState"](null,null,i+a,a),c()},c=()=>{const a=document.querySelector("#root");let{pathname:t}=location;t.includes(i)&&(t=t.replace(i,""));const n=s.isLogon();if(t===e.PROFILE&&!n)return r(e.LOGIN,!0);if(t===e.LOGIN&&n)return r(e.MAIN,!0);const o=O[t]||u;a.innerHTML=o(),I()},I=()=>{const a=document.querySelector("#root");a.addEventListener("submit",t=>{if(t.preventDefault(),t.target.id===l.LOGIN_FORM){const o=new FormData(t.target).get("username")||"";s.login(o),r(e.MAIN)}else if(t.target.id===l.PROFILE_FORM){const n=new FormData(t.target),o=n.get("username")||"",g=n.get("email")||"",L=n.get("bio")||"";s.setUser({username:o,email:g,bio:L})}}),a.addEventListener("click",t=>{if(t.target.tagName==="A"){if(t.preventDefault(),t.target.pathname===e.LOGOUT){s.logout(),r(e.LOGIN);return}r(t.target.pathname)}}),a.addEventListener(f.PAGE_PUSH,t=>{t.detail.url&&r(t.detail.url)})};window.addEventListener("popstate",c);window.addEventListener("DOMContentLoaded",c);
