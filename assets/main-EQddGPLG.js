import{P as i,s,R as e,E as d,a as L,L as E,M as m,S as f,b as c,C as O}from"./profile-page-DL7GnNVv.js";const p={[e.MAIN]:m,[e.LOGIN]:E,[e.PROFILE]:L,[e.ERROR]:d},r=(a,t=!1)=>{history[t?"replaceState":"pushState"](null,null,i+a,a),l()},l=()=>{const a=document.querySelector("#root");let{pathname:t}=location;t.includes(i)&&(t=t.replace(i,""));const n=s.isLogon();if(t!==e.MAIN&&t.endsWith("/")&&(t=t.slice(0,-1)),t===e.PROFILE&&!n)return r(e.LOGIN,!0);if(t===e.LOGIN&&n)return r(e.MAIN,!0);const o=p[t]||d;a.innerHTML=o(),I(),a.parentNode.appendChild(f())},I=()=>{const a=document.querySelector("#root");a.addEventListener("submit",t=>{if(t.preventDefault(),t.target.id===c.LOGIN_FORM){const o=new FormData(t.target).get("username")||"";s.login(o),r(e.MAIN)}else if(t.target.id===c.PROFILE_FORM){const n=new FormData(t.target),o=n.get("username")||"",u=n.get("email")||"",g=n.get("bio")||"";s.setUser({username:o,email:u,bio:g})}}),a.addEventListener("click",t=>{if(t.target.tagName==="A"){if(t.preventDefault(),t.target.pathname===e.LOGOUT){s.logout(),r(e.LOGIN);return}r(t.target.pathname)}}),a.addEventListener(O.PAGE_PUSH,t=>{t.detail.url&&r(t.detail.url)})};window.addEventListener("popstate",l);window.addEventListener("DOMContentLoaded",l);
